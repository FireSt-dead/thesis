<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META HTTP-EQUIV="Content-Type" content="text/html;charset=windows-1251">
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Катедралата и базарът: Fetchmail пораства</TITLE>
 <LINK HREF="catb-bg-8.html" REL=next>
 <LINK HREF="catb-bg-6.html" REL=previous>
 <LINK HREF="catb-bg.html#toc7" REL=contents>
</HEAD>
<BODY>
<A HREF="catb-bg-8.html">Следваща страница</A>
<A HREF="catb-bg-6.html">Предишна страница</A>
<A HREF="catb-bg.html#toc7">Съдържание</A>
<HR>
<H2><A NAME="s7">7. Fetchmail пораства</A></H2>

<P>Така се оказах със спретнат и иновативен дизайн; с код, за който
знаех че работи добре, понеже го използвах всекидневно, и с набъбващ
списък от бета потребители. Постепенно ми стана ясно, че вече не съм
ангажиран с незначителна лична джунджурийка, която евентуално може да
бъде полезна другиму. В ръцете си държах програма, от която
действително се нуждаеше всеки хакер с Unix система и пощенска връзка
през SLIP/PPP.
<P>С възможността за SMTP препращане, програмата дръпна много пред
конкуренцията, с изгледи да се превърне в "убиец в категорията си" --
една от онези класически програми, които толкова плътно запълват своята
ниша, че алтернативите не само биват изоставяни, но и почти
забравяни.
<P>Мисля, че не можете действително да целите или планирате подобен
резултат. До него трябва да ви докарат такива силни дизайнерски идеи,
че впоследствие резултатите просто изглеждат неизбежни, естествени,
дори предопределени. Единственият начин да се домогнете до такива идеи
е да разполагате с много идеи. Или да разполагате с инженерна преценка,
за да схващате чуждите добри идеи отвъд границите, до които авторите им
са предполагали, че е възможно да се отиде.
<P>Анди Таненбаум е имал първоначалната идея да построи една проста
нативна Unix система за IBM PC, която да се използва като учебно
пособие. Линус Торвалдс е тласнал концепцията за Minix по-напред,
отколкото Андрю изобщо е предполагал, че е възможно да отиде. И тя се
превърна в нещо удивително. По същият начин (макар и в по-малък мащаб),
аз взех някои идеи от Карл Харис и Хари Хокхейзър и ги тласнах силно.
Никой от нас не беше "оригинален" в романтичния смисъл, според който
хората мислят за гения. Напук на хакерската митология, повечето научни,
инженерни и софтуерни разработки не са дело на някой оригинален
гений.
<P>Резултатите водеха до едно и също шеметно опиянение -- всъщност,
точно това е успехът, заради който живее всеки хакер! И това
означаваше, че трябваше да вдигна летвата още по-високо. За да направя
fetchmail толкова добър, колкото тогава видях че може да бъде, трябваше
да пиша не само за собствените си нужди, но също така да включвам и
поддържам възможности извън моята орбита, но необходими за други хора.
И да го правя тъй, че да държа програмата проста и ясна.
<P>Първата и изумително важна възможност, която написах след като
осъзнах горното, беше поддръжката на множествено пускане --
възможността да се изтегля поща от пощенски кутии, които са насъбрали
всичката поща за група потребители, и после всяко съобщение да се
маршрутизира до индивидуалните му получатели.
<P>Режих да добавя поддръжката на множествено пускане отчасти защото
някои потребители настояваха за нея, но най-вече защото мислех, че това
ще изтръска грешките от кода за еднично пускане, принуждавайки ме да
работя с адресирането в пълната му всеобщност. Така и стана.
Сколасването на правилно граматично анализиране според 
<A HREF="http://info.internet.isi.edu:80/in-notes/rfc/files/rfc822.txt">RFC 822</A> ми отне забележително много време, и то не защото всяка
отделна негова част е трудна, а понеже е заплетена цяла камара от
взаимнозависими и мъгляви подробности.
<P>Но адресирането с множествено пускане също се оказа отлично
дизайнерско решение. Ето как разбрах това:
<P>
<BLOCKQUOTE>
<EM>14. Всеки инструмент трябва да бъде полезен по очаквания
начин, но един истински велик инструмент се употребява по начини, които
никога не си очаквал.</EM>
</BLOCKQUOTE>
<P>Неочакваната употреба на поддържащия множествено пускане fetchmail
беше изпълнението на пощенски списъци, където списъкът се пазеше на и
псевдонимите се обработваха от <EM>клиентската</EM> страна на SLIP/PPP
връзката. Това означава, че дори някой с личната си машина през ISP
акаунт може да управлява пощенски списък, без да разчита на достъп до
alias-файловете на Интернет доставчика си.
<P>Друга важна промяна, изисквана от моите бета изпитатели, беше
поддръжката на работа с 8-битово MIME. Това беше много лесно за
изпълнение, тъй като аз бях внимателен да пазя кода хигиеничен към 8-те
бита. Не защото предугаждах изискването на това свойство, а по-скоро
заради спазването на едно друго правило:
<P>
<BLOCKQUOTE>
<EM>15. Когато пишеш какъвто и да било шлюзов софтуер,
направи си труда колкото се може по-малко да смущаваш потока от данни.
И *никога* не изхвърляй информация, освен ако получателят не те принуди
да го сториш. </EM>
</BLOCKQUOTE>
<P>Ако не бях спазил това правило, подръжката на 8-битово MIME щеше да
бъде мъчна и пълна с грешки. Но в случая, всичко което трябваше да
сторя беше да прочета 
<A HREF="http://info.internet.isi.edu:80/in-notes/rfc/files/rfc1652.txt">RFC 1652</A> и да добавя малко незначителна логика за генериране на
заглавия.
<P>Някои европейски потребители ме врънкаха да добавя възможност за
избор на броя на съобщенията, обработвани за една сесия (така че да
могат да контролират разходите за техните скъпи телефонни мрежи). Дълго
време бях непреклонен за това, и то все още не ме радва напълно. Но ако
пишете за света, трябва да се вслушвате в своите клиенти -- това не се
променя само защото те не ви плащат пари.
<HR>
<A HREF="catb-bg-8.html">Следваща страница</A>
<A HREF="catb-bg-6.html">Предишна страница</A>
<A HREF="catb-bg.html#toc7">Съдържание</A>
</BODY>
</HTML>
